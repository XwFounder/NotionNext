# HEO主题业务逻辑与功能详解

## 主题概述

HEO主题是NotionNext项目中的一个现代化博客主题，由[张洪](https://zhheo.com/)设计，[tangly1024](https://github.com/tangly1024)开发。该主题采用响应式设计，支持深色模式，具有丰富的交互效果和个性化配置选项。

## 核心架构

### 1. 布局结构

HEO主题采用经典的上中下三段式布局：

```
┌─────────────────────────────────────┐
│              Header                 │  ← 顶部导航栏
├─────────────────────────────────────┤
│              Hero区                 │  ← 首页英雄区（仅首页显示）
├─────────────────────────────────────┤
│  Main Content  │    Side Right      │  ← 主内容区 + 右侧栏
│                │                    │
├─────────────────────────────────────┤
│              Footer                 │  ← 页脚
└─────────────────────────────────────┐
```

### 2. 主要组件层次

- **LayoutBase**: 基础布局容器
  - **Header**: 顶部导航栏
  - **Hero**: 英雄区（首页专用）
  - **Main**: 主内容区
    - **LayoutIndex**: 首页布局
    - **LayoutPostList**: 文章列表布局
    - **LayoutSlug**: 文章详情布局
  - **SideRight**: 右侧栏
  - **Footer**: 页脚

## 核心功能模块

### 1. 英雄区（Hero）功能

英雄区是HEO主题的特色功能，位于首页顶部，包含以下组件：

#### BannerGroup（左侧横幅组）
- **Banner动图**: 可点击随机跳转文章
- **GroupMenu**: 导航分类快捷入口
- **配置项**:
  - `HEO_HERO_COVER_TITLE`: 遮罩文字
  - `HEO_HERO_TITLE_1-5`: 英雄区标题文字
  - `HEO_HERO_TITLE_LINK`: 点击跳转链接

#### TopGroup（右侧置顶文章组）
- 显示推荐文章卡片
- 支持按标签筛选推荐文章
- **配置项**:
  - `HEO_HERO_RECOMMEND_POST_TAG`: 推荐文章标签
  - `HEO_HERO_RECOMMEND_POST_SORT_BY_UPDATE_TIME`: 排序方式

#### 布局控制
- `HEO_HERO_REVERSE`: 左右组件位置颠倒
- `HEO_HERO_BODY_REVERSE`: 主体区域左右颠倒

### 2. 导航系统

#### 顶部导航栏（Header）
- **响应式设计**: 桌面端水平导航，移动端侧边抽屉
- **滚动效果**: 根据滚动位置动态调整样式
  - 页面顶部：透明背景
  - 滚动后：白色背景，固定定位
- **功能组件**:
  - Logo区域
  - 主菜单
  - 搜索按钮
  - 深色模式切换
  - 移动端菜单按钮

#### 通知栏（NoticeBar）
- 首页顶部滚动通知
- **配置项**: `HEO_NOTICE_BAR`
- 支持多条通知轮播显示

### 3. 文章展示系统

#### 文章列表
- **双列布局**: `HEO_HOME_POST_TWO_COLS` 控制是否启用
- **分页方式**: 支持滚动加载和分页两种模式
- **文章卡片功能**:
  - 封面图片展示
  - 文章摘要
  - 标签显示
  - 发布时间
  - 阅读统计

#### 文章详情页
- **文章头部**: PostHeader组件显示标题、元信息
- **文章内容**: NotionPage组件渲染Notion内容
- **辅助功能**:
  - 文章过期提醒
  - AI摘要显示
  - 版权声明
  - 相关文章推荐
  - 上下篇导航
  - 分享按钮

### 4. 右侧栏系统（SideRight）

右侧栏包含多个功能卡片：

#### InfoCard（个人信息卡）
- **头像展示**: 支持点击旋转效果
- **欢迎语**: 可配置多条欢迎语自动切换
- **操作按钮**: 最多3个自定义按钮
- **配置项**:
  - `HEO_INFOCARD_GREETINGS`: 欢迎语数组
  - `HEO_INFO_CARD_URL1-3`: 按钮链接
  - `HEO_INFO_CARD_ICON1-3`: 按钮图标

#### 目录导航（Catalog）
- 文章页面自动生成目录
- 支持点击跳转到对应章节
- 当前阅读位置高亮显示

#### 最新文章（LatestPostsGroupMini）
- 显示最新发布的文章列表
- 支持配置显示数量
- 点击直接跳转到文章

#### 标签云（TagGroups）
- 展示所有文章标签
- 标签大小根据文章数量调整
- 点击标签筛选相关文章

#### 联系卡片（TouchMeCard）
- 社交媒体联系方式
- 支持自定义联系信息
- **配置项**:
  - `HEO_SOCIAL_CARD`: 是否显示
  - `HEO_SOCIAL_CARD_TITLE_1-3`: 卡片文字
  - `HEO_SOCIAL_CARD_URL`: 跳转链接

#### 统计卡片（AnalyticsCard）
- 网站运行天数统计
- 文章数量统计
- 访问量统计（需配合第三方统计）
- **配置项**:
  - `HEO_SITE_CREATE_TIME`: 建站日期
  - `HEO_POST_COUNT_TITLE`: 文章数标题
  - `HEO_SITE_TIME_TITLE`: 建站天数标题

### 5. 页脚系统（Footer）

#### 社交按钮区
- 显示各种社交媒体图标
- 支持自定义社交链接
- 响应式布局适配

#### 版权信息区
- 网站版权声明
- 备案信息显示
- 技术支持信息
- 个人简介展示

### 6. 交互效果系统

#### 动画效果
- **WOW.js动画**: 页面滚动时触发动画
- **加载遮罩**: `HEO_LOADING_COVER` 控制页面加载动画
- **悬停效果**: 卡片悬停时的阴影和变换效果

#### 响应式设计
- **断点设置**:
  - 移动端: < 768px
  - 平板端: 768px - 1024px
  - 桌面端: > 1024px
- **布局适配**: 不同屏幕尺寸下的布局调整

### 7. 主题定制系统

#### 颜色主题
- **浅色模式**: 默认白色背景主题
- **深色模式**: 深色背景主题
- **自动切换**: 根据系统设置或时间自动切换

#### 字体系统
- 支持多种字体选择
- 中英文字体分别配置
- 代码块专用等宽字体

#### 自定义样式
- 主题专用CSS样式文件
- 支持自定义颜色变量
- 响应式样式适配

## 配置选项详解

### 布局配置
- `HEO_HOME_POST_TWO_COLS`: 首页双列布局
- `HEO_HERO_REVERSE`: 英雄区左右颠倒
- `HEO_HERO_BODY_REVERSE`: 主体区左右颠倒

### 功能开关
- `HEO_LOADING_COVER`: 加载遮罩动画
- `HEO_HOME_BANNER_ENABLE`: 首页横幅启用
- `HEO_SOCIAL_CARD`: 社交卡片显示

### 内容配置
- `HEO_NOTICE_BAR`: 通知栏内容
- `HEO_INFOCARD_GREETINGS`: 个人卡片欢迎语
- `HEO_HERO_CATEGORY_1-3`: 英雄区分类链接

### 统计配置
- `HEO_SITE_CREATE_TIME`: 建站时间
- `HEO_WIDGET_ANALYTICS`: 统计卡片显示

## 技术特性

### 性能优化
- 图片懒加载
- 组件按需加载
- CSS样式优化
- 滚动事件节流

### SEO优化
- 结构化数据标记
- 语义化HTML标签
- 元信息完整配置
- 面包屑导航

### 可访问性
- 键盘导航支持
- 屏幕阅读器友好
- 颜色对比度优化
- 焦点状态明确

## 扩展性设计

HEO主题采用模块化设计，支持：
- 自定义组件扩展
- 第三方插件集成
- 样式主题定制
- 功能模块替换

这种设计使得主题既保持了核心功能的稳定性，又具备了良好的扩展性和定制性。
